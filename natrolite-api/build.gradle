plugins {
    id 'java'
}

sourceSets {
    example {
        compileClasspath += main.compileClasspath + main.output
    }
}

license {
    exclude 'org/natrolite/cause/Cause.java'
    exclude 'org/natrolite/cause/NamedCause.java'

    exclude 'org/natrolite/context/Context.java'
    exclude 'org/natrolite/context/ContextCalculator.java'
    exclude 'org/natrolite/context/ContextSource.java'
    exclude 'org/natrolite/context/Contextual.java'
    exclude 'org/natrolite/context/ContextualService.java'

    exclude 'org/natrolite/economy/Currency.java'
    exclude 'org/natrolite/economy/EconomyService.java'
    exclude 'org/natrolite/economy/account/Account.java'
    exclude 'org/natrolite/economy/account/UniqueAccount.java'
    exclude 'org/natrolite/economy/account/VirtualAccount.java'
    exclude 'org/natrolite/economy/transaction/ResultType.java'
    exclude 'org/natrolite/economy/transaction/TransactionResult.java'
    exclude 'org/natrolite/economy/transaction/TransactionType.java'
    exclude 'org/natrolite/economy/transaction/TransactionTypes.java'
    exclude 'org/natrolite/economy/transaction/TransferResult.java'

    exclude 'org/natrolite/metrics/Metrics.java'
    exclude 'org/natrolite/metrics/MetricsLite.java'

    exclude 'org/natrolite/util/Tristate.java'
    exclude 'org/natrolite/util/OptBool.java'
}

dependencies {
    testCompile group: 'org.spigotmc', name: 'spigot-api', version: bukkitVersion
    compileOnly group: 'org.spigotmc', name: 'spigot-api', version: bukkitVersion

    compile group: 'org.slf4j', name: 'slf4j-simple', version: '1.7.25'
    compile (group: 'com.zaxxer', name: 'HikariCP', version: '2.6.2') {
        exclude module: 'slf4j-api'
    }

    compile(group: 'ninja.leaping.configurate', name: 'configurate-hocon', version: '3.3') {
        exclude module: 'guava'
    }
    compile(group: 'ninja.leaping.configurate', name: 'configurate-gson', version: '3.3') {
        exclude module: 'guava'
        exclude module: 'gson'
    }
    compile(group: 'ninja.leaping.configurate', name: 'configurate-yaml', version: '3.3') {
        exclude module: 'guava'
        exclude module: 'snakeyaml'
    }

    utils.values().forEach { util ->
        compile util
        testCompile util
    }
}

apply from: rootProject.file('gradle/deploy.gradle')